# Tax Allotment Web Maps

Use TileMill to create raster web maps from a vector tax allotment layer and define map style options. TileMill generates a MBTiles file of web map tiles. Use MBUtil to export web map tiles from the MBTiles file into a hierarchical directory of png files (which can be used as a slippy web map in Leaflet).

## Install TileMill

**Install `node` and `nvm` before installing TileMill.**

```
git clone https://github.com/tilemill-project/tilemill.git
cd tilemill
cd ~/tilemill/utils
./installtilemill.sh -v
```

Run TileMill

```
cd ..
nvm use v8.15.0
./tilemill.sh
```

Before creating an TileMill project, go to settings and set the project directory to an appropriate location (i.e. the root of this repo).

Web map stylesheets (cartoCSS format) are saved to the `project` directory. 

## Install mb-utils


Use MBUtil to export tiles from MBTiles format (i.e. the MBTiles file generated by TileMill)

```
git clone git://github.com/mapbox/mbutil.git
````

Export the MBTiles map tiles to xyx scheme folder of png files. `outdir` is the directory where web map tiles will be exported to and it cannot exist (i.e. MBUtil will create it)

```
cd mbutil
./mb-util "<path-to-mbtiles>" outdir --image_format=png
```